<template>
    <require from="style.css"></require>
    <div class="page">
        <div class="controlArea">
            <select style.bind="getRouteStyle(currentRoute.shortName)" if.bind="routes" value.bind="selectedRoute">
                <option model.bind="undefined">Choose...</option>
                <option style.bind="getRouteStyle(route.shortName)" repeat.for="route of routes" model.bind="route">
                    ${route.shortName} - ${route.longName}
                </option>
            </select>
            <select style.bind="getRouteStyle(currentRoute.shortName)" if.bind="stops" value.bind="selectedStop">
                <option model.bind="undefined">Choose...</option>
                <option repeat.for="stop of stops.data" model.bind="stop">
                    ${stop.stopDescription}(${stop.stopId})
                </option>
            </select>
        </div>
        <div class="arrivalContainer">
            <div class="arrival" if.bind="currentStopInfo" repeat.for="arriving of currentStopInfo.data">
                <span class="arrivalText" style.bind="getRouteStyle(arriving.routeShortName)" innerhtml.bind="arrivalText(arriving)"></span>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="refreshIndicator" if.bind="!notCurrentlyRequesting">Refreshing...</div>
        <div if.bind="currentStopInfo">Estimates are ${timeSinceLastDataTimestamp} seconds old</div>
    </div>
</template>